(()=>{"use strict";const e=()=>{const e=document.getElementById("cont"),t=document.getElementById("percent"),n=document.getElementById("month"),o=document.getElementById("input-cont"),a=document.getElementById("input-percent"),u=document.getElementById("input-month"),l=document.getElementById("monthly-payment"),s=document.getElementById("total-sum"),r=document.querySelector(".form__span-js"),d=document.querySelector(".sum__item-rub");document.querySelector(".sum__item-label");let i,c=+o.value.replace(/\s/g,""),f=+a.value.replace(/\s/g,""),h=+u.value.replace(/\s/g,""),m=+l.value.replace(/\s/g,"");function v(e,t){t.value=e.value}function g(e){r.textContent=e}function p(e,t,n){const o=Math.round((e-t)*(.035*Math.pow(1.035,n)/(Math.pow(1.035,n)-1)));m=l.value=o>=0?o:1}function y(e,t){const n=Math.round(e+t*m);d.style.display="none",s.value=`${n} ₽`}var E,b;function M(e){e.addEventListener("keydown",(function(e){1===e.key.length&&/\D/.test(e.key)&&e.preventDefault()}))}b=o,(E=e).addEventListener("input",(function(){const e=+this.value;c=e;const t=100*(e-1e6)/5e6;this.style.background=`linear-gradient(to right, #ff9514  0%, #ff9514  ${t}%, #fff ${t}%, white 100%)`,v(E,b),f=a.value=Math.round(e/10),i=Math.round(100*f/c),g(i),p(e,f,h),y(f,h)})),o.addEventListener("blur",(function(){let e=+this.value.replace(/\s/g,"");if(""!==e)if(e<1e6||e>6e6){let e=this.value=1e6;c=e,f=a.value=Math.round(e/10),i=Math.round(100*f/c),g(i),p(e,f,h),y(f,h)}else c=e,f=a.value=Math.round(e/10),i=Math.round(100*f/c),g(i),p(e,f,h),y(f,h)})),a.addEventListener("blur",(function(){const e=this.value;let t=+e.replace(/\s/g,"");if(""!==e){let e=Math.round(100*t/c);if(e<10||e>60){let e=this.value=c/10;f=e,i=Math.round(100*e/c),g(i),p(c,e,h),y(e,h)}else f=t,i=Math.round(100*t/c),g(i),p(c,t,h),y(t,h)}})),u.addEventListener("blur",(function(){const e=this.value;let t=+e.replace(/\s/g,"");if(""!==e)if(e<1||e>60){let e=this.value=1;h=e,p(c,f,e),y(f,e)}else h=t,p(c,f,t),y(f,t)})),function(e,t){e.addEventListener("input",(function(){const t=+this.value,n=100*(t-10)/50;let o;this.style.background=`linear-gradient(to right, #ff9514  0%, #ff9514  ${n}%, #fff ${n}%, white 100%)`,g(e.value),o=c*t/100,f=a.value=Math.round(o),p(c,f,h),y(f,h)}))}(t),function(e,t){e.addEventListener("input",(function(){const n=+this.value;h=n;const o=100*(n-1)/59;this.style.background=`linear-gradient(to right, #ff9514  0%, #ff9514  ${o}%, #fff ${o}%, white 100%)`,v(e,t),p(c,f,n),y(f,n)}))}(n,u),M(o),M(a),M(u),M(l),M(s);let w=!1;const L=document.querySelector(".car__cost"),B=document.getElementById("btn-place-order");function I(o){B.textContent="",B.disabled=o,e.disabled=o,t.disabled=o,n.disabled=o}L.addEventListener("submit",(e=>{I(!0);const t={};e.preventDefault();for(let{name:e,value:n}of L.elements)e&&(n=n.replace(/\s/g,""),t[e]=n,""==n&&(w=!0));console.log(t),w?alert("The form is filled out incorrectly!"):fetch("https://test-form-a53f8-default-rtdb.europe-west1.firebasedatabase.app/men.json",{method:"POST",body:JSON.stringify(t)}).then((e=>{if(200===e.status||201===e.status)return e.json();throw new Error(e.status)})).then((e=>{console.log(e),I(!1),B.textContent="Оставить заявку"})).catch((e=>{alert("an error has occurred, the status"+e.message)}))}))};window.addEventListener("DOMContentLoaded",(()=>{e()}))})();